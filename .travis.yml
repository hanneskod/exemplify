sudo: false

language: php

php:
    - 7.4

install:
    - make vendor/installed
    - wget -O phive.phar https://phar.io/releases/phive.phar
    - make tools/installed PHIVE_CMD="php phive.phar"

script:
    - make continuous-integration
    - make build
    - make check

deploy:
    provider: releases
    api_key:
        secure: eF3bNEQ7cx9xl5FlnlgMt6kFxUBpV40QfQmNl98Vtf6xsOFayCJslO4tb3Kackd9rg8WOPXV3n2dJQBp8AZWkOYHkR84PKheJ5X+TXvtRjjReFvSOUlpF/6bw++68fhEkvq/+Rzdo2zxeNTZKRck0h34pec3ChG0podY/RtswQU=
    file: readme-tester.phar
    skip_cleanup: true
    on:
        repo: hanneskod/readme-tester
        tags: true
        condition: ${TRAVIS_PHP_VERSION:0:3} == "7.4"
